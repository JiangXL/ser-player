#!/bin/bash

wget -q https://github.com/probonopd/AppImages/raw/master/functions.sh -O ./functions.sh
. ./functions.sh

echo "Copying Other libs to directory other_libs"
rm -r other_libs
mkdir other_libs

other_libs=$(ldd ../bin/ser-player | grep -v Qt)
#echo "$other_libs"

other_lib=()
mapfile -t other_lib <<< "$other_libs"
for lib in "${other_lib[@]}"
do
    a=( $lib )
    count=${#a[@]}
    if ((count > 3)); then
        echo "$lib"
        cp -n ${a[2]} other_libs
        sub_libs=$(ldd ${a[2]} | grep -v Qt)
        sub_lib=()
        mapfile -t sub_lib <<< "$sub_libs"
        for lib2 in "${qt_lib[@]}"
        do
            a2=( $lib2 )
            cp -n ${a2[2]} other_libs
        done
    fi
done

cd other_libs
delete_blacklisted
cd ..


